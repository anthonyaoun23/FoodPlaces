{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"./polyfillNextTick","data":{"isAsync":false}},{"name":"lodash/zipObject","data":{"isAsync":false}},{"name":"react-native","data":{"isAsync":false}},{"name":"@unimodules/core","data":{"isAsync":false}},{"name":"@expo/websql/custom","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.openDatabase = openDatabase;\n  exports.default = void 0;\n\n  var _slicedToArray2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\"));\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/createClass\"));\n\n  _$$_REQUIRE(_dependencyMap[4], \"./polyfillNextTick\");\n\n  var _zipObject = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"lodash/zipObject\"));\n\n  var _reactNative = _$$_REQUIRE(_dependencyMap[6], \"react-native\");\n\n  var _core = _$$_REQUIRE(_dependencyMap[7], \"@unimodules/core\");\n\n  var _custom = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[8], \"@expo/websql/custom\"));\n\n  var ExponentSQLite = _core.NativeModulesProxy.ExponentSQLite;\n\n  var SQLiteDatabase = function () {\n    function SQLiteDatabase(name) {\n      (0, _classCallCheck2.default)(this, SQLiteDatabase);\n      this._closed = false;\n      this._name = name;\n    }\n\n    (0, _createClass2.default)(SQLiteDatabase, [{\n      key: \"exec\",\n      value: function exec(queries, readOnly, callback) {\n        if (this._closed) {\n          throw new Error(\"The SQLite database is closed\");\n        }\n\n        ExponentSQLite.exec(this._name, queries.map(_serializeQuery), readOnly).then(function (nativeResultSets) {\n          callback(null, nativeResultSets.map(_deserializeResultSet));\n        }, function (error) {\n          callback(error instanceof Error ? error : new Error(error));\n        });\n      }\n    }, {\n      key: \"close\",\n      value: function close() {\n        this._closed = true;\n        ExponentSQLite.close(this._name);\n      }\n    }]);\n    return SQLiteDatabase;\n  }();\n\n  function _serializeQuery(query) {\n    return [query.sql, _reactNative.Platform.OS === 'android' ? query.args.map(_escapeBlob) : query.args];\n  }\n\n  function _deserializeResultSet(nativeResult) {\n    var _nativeResult = (0, _slicedToArray2.default)(nativeResult, 5),\n        errorMessage = _nativeResult[0],\n        insertId = _nativeResult[1],\n        rowsAffected = _nativeResult[2],\n        columns = _nativeResult[3],\n        rows = _nativeResult[4];\n\n    if (errorMessage !== null) {\n      return {\n        error: new Error(errorMessage)\n      };\n    }\n\n    return {\n      insertId: insertId,\n      rowsAffected: rowsAffected,\n      rows: rows.map(function (row) {\n        return (0, _zipObject.default)(columns, row);\n      })\n    };\n  }\n\n  function _escapeBlob(data) {\n    if (typeof data === 'string') {\n      return data.replace(/\\u0002/g, \"\\x02\\x02\").replace(/\\u0001/g, \"\\x01\\x02\").replace(/\\u0000/g, \"\\x01\\x01\");\n    } else {\n      return data;\n    }\n  }\n\n  var _openExpoSQLiteDatabase = (0, _custom.default)(SQLiteDatabase);\n\n  function addExecMethod(db) {\n    db.exec = function (queries, readOnly, callback) {\n      db._db.exec(queries, readOnly, callback);\n    };\n\n    return db;\n  }\n\n  function openDatabase(name) {\n    var version = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '1.0';\n    var description = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : name;\n    var size = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n    var callback = arguments.length > 4 ? arguments[4] : undefined;\n\n    if (name === undefined) {\n      throw new TypeError(\"The database name must not be undefined\");\n    }\n\n    var db = _openExpoSQLiteDatabase(name, version, description, size, callback);\n\n    var dbWithExec = addExecMethod(db);\n    return dbWithExec;\n  }\n\n  var _default = {\n    openDatabase: openDatabase\n  };\n  exports.default = _default;\n});","map":[[16,0,1,0],[18,0,2,0],[20,0,3,0],[22,0,4,0],[24,0,5,0],[26,6,6,8,"ExponentSQLite"],[26,20],[26,23,6,27,"NativeModulesProxy"],[26,47],[26,48,6,8,"ExponentSQLite"],[26,62],[28,6,7,6,"SQLiteDatabase"],[28,20],[29,0,8,4],[29,28,8,16,"name"],[29,32,8,4],[29,34,8,22],[30,0,8,22],[31,0,9,8],[31,11,9,13,"_closed"],[31,18,9,8],[31,21,9,23],[31,26,9,8],[32,0,10,8],[32,11,10,13,"_name"],[32,16,10,8],[32,19,10,21,"name"],[32,23,10,8],[33,0,11,5],[37,27,12,9,"queries"],[37,34],[37,36,12,18,"readOnly"],[37,44],[37,46,12,28,"callback"],[37,54],[37,56,12,38],[38,0,13,8],[38,12,13,12],[38,17,13,17,"_closed"],[38,24,13,8],[38,26,13,26],[39,0,14,12],[39,16,14,18],[39,20,14,22,"Error"],[39,25,14,18],[39,58,14,12],[40,0,15,9],[42,0,16,8,"ExponentSQLite"],[42,8,16,8,"ExponentSQLite"],[42,22,16,22],[42,23,16,23,"exec"],[42,27,16,8],[42,28,16,28],[42,33,16,33,"_name"],[42,38,16,8],[42,40,16,40,"queries"],[42,47,16,47],[42,48,16,48,"map"],[42,51,16,40],[42,52,16,52,"_serializeQuery"],[42,67,16,40],[42,68,16,8],[42,70,16,70,"readOnly"],[42,78,16,8],[42,80,16,80,"then"],[42,84,16,8],[42,85,16,85],[42,95,16,85,"nativeResultSets"],[42,111,16,101],[42,113,16,105],[43,0,17,12,"callback"],[43,10,17,12,"callback"],[43,18,17,20],[43,19,17,21],[43,23,17,20],[43,25,17,27,"nativeResultSets"],[43,41,17,43],[43,42,17,44,"map"],[43,45,17,27],[43,46,17,48,"_deserializeResultSet"],[43,67,17,27],[43,68,17,20],[43,69,17,12],[44,0,18,9],[44,9,16,8],[44,11,18,11],[44,21,18,11,"error"],[44,26,18,16],[44,28,18,20],[45,0,20,12,"callback"],[45,10,20,12,"callback"],[45,18,20,20],[45,19,20,21,"error"],[45,24,20,26],[45,36,20,38,"Error"],[45,41,20,21],[45,44,20,46,"error"],[45,49,20,21],[45,52,20,54],[45,56,20,58,"Error"],[45,61,20,54],[45,62,20,64,"error"],[45,67,20,54],[45,68,20,20],[45,69,20,12],[46,0,21,9],[46,9,16,8],[47,0,22,5],[50,30,23,12],[51,0,24,8],[51,13,24,13,"_closed"],[51,20,24,8],[51,23,24,23],[51,27,24,8],[52,0,25,8,"ExponentSQLite"],[52,8,25,8,"ExponentSQLite"],[52,22,25,22],[52,23,25,23,"close"],[52,28,25,8],[52,29,25,29],[52,34,25,34,"_name"],[52,39,25,8],[53,0,26,5],[58,0,28,0],[58,11,28,9,"_serializeQuery"],[58,26,28,0],[58,27,28,25,"query"],[58,32,28,0],[58,34,28,32],[59,0,29,4],[59,11,29,11],[59,12,29,12,"query"],[59,17,29,17],[59,18,29,18,"sql"],[59,21,29,11],[59,23,29,23,"Platform"],[59,45,29,32,"OS"],[59,47,29,23],[59,52,29,39],[59,61,29,23],[59,64,29,51,"query"],[59,69,29,56],[59,70,29,57,"args"],[59,74,29,51],[59,75,29,62,"map"],[59,78,29,51],[59,79,29,66,"_escapeBlob"],[59,90,29,51],[59,91,29,23],[59,94,29,81,"query"],[59,99,29,86],[59,100,29,87,"args"],[59,104,29,11],[59,105,29,4],[60,0,30,1],[62,0,31,0],[62,11,31,9,"_deserializeResultSet"],[62,32,31,0],[62,33,31,31,"nativeResult"],[62,45,31,0],[62,47,31,45],[63,0,31,45],[63,53,32,64,"nativeResult"],[63,65,31,45],[64,0,31,45],[64,8,32,9,"errorMessage"],[64,20,31,45],[65,0,31,45],[65,8,32,23,"insertId"],[65,16,31,45],[66,0,31,45],[66,8,32,33,"rowsAffected"],[66,20,31,45],[67,0,31,45],[67,8,32,47,"columns"],[67,15,31,45],[68,0,31,45],[68,8,32,56,"rows"],[68,12,31,45],[70,0,35,4],[70,8,35,8,"errorMessage"],[70,20,35,20],[70,25,35,25],[70,29,35,4],[70,31,35,31],[71,0,36,8],[71,13,36,15],[72,0,36,17,"error"],[72,8,36,17,"error"],[72,13,36,22],[72,15,36,24],[72,19,36,28,"Error"],[72,24,36,24],[72,25,36,34,"errorMessage"],[72,37,36,24],[73,0,36,15],[73,7,36,8],[74,0,37,5],[76,0,38,4],[76,11,38,11],[77,0,39,8,"insertId"],[77,6,39,8,"insertId"],[77,14,39,16],[77,16,39,8,"insertId"],[77,24,38,11],[78,0,40,8,"rowsAffected"],[78,6,40,8,"rowsAffected"],[78,18,40,20],[78,20,40,8,"rowsAffected"],[78,32,38,11],[79,0,41,8,"rows"],[79,6,41,8,"rows"],[79,10,41,12],[79,12,41,14,"rows"],[79,16,41,18],[79,17,41,19,"map"],[79,20,41,14],[79,21,41,23],[79,31,41,23,"row"],[79,34,41,26],[80,0,41,26],[80,15,41,30],[80,39,41,40,"columns"],[80,46,41,30],[80,48,41,49,"row"],[80,51,41,30],[80,52,41,26],[81,0,41,26],[81,7,41,14],[82,0,38,11],[82,5,38,4],[83,0,43,1],[85,0,44,0],[85,11,44,9,"_escapeBlob"],[85,22,44,0],[85,23,44,21,"data"],[85,27,44,0],[85,29,44,27],[86,0,45,4],[86,8,45,8],[86,15,45,15,"data"],[86,19,45,8],[86,24,45,24],[86,32,45,4],[86,34,45,34],[87,0,47,8],[87,13,47,15,"data"],[87,17,47,19],[87,18,48,13,"replace"],[87,25,47,15],[87,26,48,21],[87,35,47,15],[87,37,48,32],[87,47,47,15],[87,49,49,13,"replace"],[87,56,47,15],[87,57,49,21],[87,66,47,15],[87,68,49,32],[87,78,47,15],[87,80,50,13,"replace"],[87,87,47,15],[87,88,50,21],[87,97,47,15],[87,99,50,32],[87,109,47,15],[87,110,47,8],[88,0,52,5],[88,5,45,4],[88,11,53,9],[89,0,54,8],[89,13,54,15,"data"],[89,17,54,8],[90,0,55,5],[91,0,56,1],[93,0,57,0],[93,6,57,6,"_openExpoSQLiteDatabase"],[93,29,57,29],[93,32,57,32],[93,53,57,51,"SQLiteDatabase"],[93,67,57,32],[93,68,57,0],[95,0,58,0],[95,11,58,9,"addExecMethod"],[95,24,58,0],[95,25,58,23,"db"],[95,27,58,0],[95,29,58,27],[96,0,59,4,"db"],[96,4,59,4,"db"],[96,6,59,6],[96,7,59,7,"exec"],[96,11,59,4],[96,14,59,14],[96,24,59,15,"queries"],[96,31,59,14],[96,33,59,24,"readOnly"],[96,41,59,14],[96,43,59,34,"callback"],[96,51,59,14],[96,53,59,47],[97,0,60,8,"db"],[97,6,60,8,"db"],[97,8,60,10],[97,9,60,11,"_db"],[97,12,60,8],[97,13,60,15,"exec"],[97,17,60,8],[97,18,60,20,"queries"],[97,25,60,8],[97,27,60,29,"readOnly"],[97,35,60,8],[97,37,60,39,"callback"],[97,45,60,8],[98,0,61,5],[98,5,59,4],[100,0,62,4],[100,11,62,11,"db"],[100,13,62,4],[101,0,63,1],[103,0,64,7],[103,11,64,16,"openDatabase"],[103,23,64,7],[103,24,64,29,"name"],[103,28,64,7],[103,30,64,92],[104,0,64,92],[104,8,64,35,"version"],[104,15,64,92],[104,86,64,45],[104,91,64,92],[105,0,64,92],[105,8,64,52,"description"],[105,19,64,92],[105,90,64,66,"name"],[105,94,64,92],[106,0,64,92],[106,8,64,72,"size"],[106,12,64,92],[106,83,64,79],[106,84,64,92],[107,0,64,92],[107,8,64,82,"callback"],[107,16,64,92],[109,0,65,4],[109,8,65,8,"name"],[109,12,65,12],[109,17,65,17,"undefined"],[109,26,65,4],[109,28,65,28],[110,0,66,8],[110,12,66,14],[110,16,66,18,"TypeError"],[110,25,66,14],[110,68,66,8],[111,0,67,5],[113,0,68,4],[113,8,68,10,"db"],[113,10,68,12],[113,13,68,15,"_openExpoSQLiteDatabase"],[113,36,68,38],[113,37,68,39,"name"],[113,41,68,38],[113,43,68,45,"version"],[113,50,68,38],[113,52,68,54,"description"],[113,63,68,38],[113,65,68,67,"size"],[113,69,68,38],[113,71,68,73,"callback"],[113,79,68,38],[113,80,68,4],[115,0,69,4],[115,8,69,10,"dbWithExec"],[115,18,69,20],[115,21,69,23,"addExecMethod"],[115,34,69,36],[115,35,69,37,"db"],[115,37,69,36],[115,38,69,4],[116,0,70,4],[116,11,70,11,"dbWithExec"],[116,21,70,4],[117,0,71,1],[119,17,72,15],[120,0,73,4,"openDatabase"],[120,4,73,4,"openDatabase"],[120,16,73,16],[120,18,73,4,"openDatabase"],[121,0,72,15],[121,3]]},"type":"js/module"}]}